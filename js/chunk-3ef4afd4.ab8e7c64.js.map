{"version":3,"sources":["webpack:///./src/views/Nearby.vue","webpack:///./src/views/Nearby.vue?101c","webpack:///./src/views/Nearby.vue?685c"],"names":["class","active","isLoading","getNearbyBusSite","nearbyBusSite","length","item","key","StationID","StationName","Zh_tw","Bearing","Stops","item2","RouteName","name","components","Navbar","Title","Footer","data","userLocation","longitude","latitude","methods","getData","url","dataName","this","axios","get","headers","then","response","catch","err","console","log","setTimeout","getUserLocation","navigator","geolocation","getCurrentPosition","position","coords","e","msg","message","error","m","mounted","distance100","document","querySelector","distance300","addEventListener","classList","add","remove","__exports__","render"],"mappings":"kPAGOA,MAAM,U,GAEJA,MAAM,kB,uBACT,eAAc,UAAV,SAAK,M,GACJA,MAAM,Y,GACJA,MAAM,kB,GAMNA,MAAM,oB,sRAbjB,eAA+B,GAArBC,OAAQ,EAAAC,WAAS,mBAC3B,eAAU,GACV,eAiCM,MAjCN,EAiCM,CAhCJ,eAAS,GACT,eA6BM,MA7BN,EA6BM,CA5BJ,EACA,eA0BM,MA1BN,EA0BM,CAzBJ,eAKM,MALN,EAKM,CAJJ,eAEM,OAFDF,MAAM,sCAAuC,QAAK,+BAAE,EAAAG,iBAAgB,QAAO,WAGhF,eAAsF,OAAjFH,MAAM,+BAAgC,QAAK,+BAAE,EAAAG,iBAAgB,QAAQ,YAE5E,eAkBM,MAlBN,EAkBM,CAjB0B,IAApB,EAAAC,cAAcC,Q,iBAAxB,eAAyD,OAAnB,mB,0CACtC,eAeM,2BAfmC,EAAAD,eAAa,SAArBE,G,wBAAjC,eAeM,OAfDN,MAAM,eAA8CO,IAAKD,EAAKE,W,CACjE,eAUK,W,8BATAF,EAAKG,YAAYC,OAAQ,IAC5B,GAAwB,MAAZJ,EAAKK,S,iBAAjB,eAA6C,SAAX,S,sBACV,MAAZL,EAAKK,S,iBAAjB,eAA6C,SAAX,S,sBACV,MAAZL,EAAKK,S,iBAAjB,eAA6C,SAAX,S,sBACV,MAAZL,EAAKK,S,iBAAjB,eAA6C,SAAX,S,sBACV,OAAZL,EAAKK,S,iBAAjB,eAA+C,SAAZ,U,sBACX,OAAZL,EAAKK,S,iBAAjB,eAA+C,SAAZ,U,sBACX,OAAZL,EAAKK,S,iBAAjB,eAA+C,SAAZ,U,sBACX,OAAZL,EAAKK,S,iBAAjB,eAA+C,SAAZ,U,4CAErC,eAEI,2BAFeL,EAAKM,OAAK,SAAnBC,G,wBAAV,eAEI,KAF4BN,IAAKM,GAAK,eACrCA,EAAMC,UAAUJ,OAAK,M,uBAMlC,eAAU,M,kEAUC,GACbK,KAAM,SACNC,WAAY,CACVC,SAAA,KACAC,QAAA,KACAC,SAAA,MAEFC,KAPa,WAQX,MAAO,CACLC,aAAc,CACZC,UAAW,EACXC,SAAU,GAEZnB,cAAe,GACfF,WAAW,IAGfsB,QAAS,CACPC,QADO,SACCC,EAAKC,GAAU,WACrBC,KAAK1B,WAAY,EACjB0B,KAAKC,MACFC,IAAIJ,EAAK,CACRK,QAAS,mBAEVC,MAAK,SAACC,GACL,EAAKN,GAAYM,EAASb,QAE3Bc,OAAM,SAACC,GACNC,QAAQC,IAAIF,MAEhBG,YAAW,WACT,EAAKpC,WAAY,IAChB,MAELqC,gBAjBO,WAiBW,WACZC,UAAUC,aACZD,UAAUC,YAAYC,oBACpB,SAACC,GACC,EAAKtB,aAAaC,UAAYqB,EAASC,OAAOtB,UAC9C,EAAKD,aAAaE,SAAWoB,EAASC,OAAOrB,SAC7C,EAAKpB,iBAAiB,QAExB,SAAC0C,GACC,IAAMC,EAAMD,EAAEE,QACdX,QAAQY,MAAMF,OAKtB3C,iBAhCO,SAgCU8C,GACfrB,KAAKH,QAAL,wFACmFG,KAAKP,aAAaE,SADrG,iBACsHK,KAAKP,aAAaC,UADxI,iBAC0J2B,EAD1J,kBAEE,mBAINC,QAxDa,WAyDXtB,KAAKW,kBAEL,IAAMY,EAAcC,SAASC,cAAc,iBACrCC,EAAcF,SAASC,cAAc,iBAC3CF,EAAYI,iBAAiB,SAAS,WACpCJ,EAAYK,UAAUC,IAAI,UAC1BH,EAAYE,UAAUE,OAAO,aAE/BJ,EAAYC,iBAAiB,SAAS,WACpCJ,EAAYK,UAAUE,OAAO,UAC7BJ,EAAYE,UAAUC,IAAI,e,iCCzGhC,MAAME,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAE1E,gB,oCCTf","file":"js/chunk-3ef4afd4.ab8e7c64.js","sourcesContent":["<template>\n  <Loading :active=\"isLoading\" />\n  <Navbar />\n  <div class=\"nearby\">\n    <Title />\n    <div class=\"nearby-content\">\n      <h2>附近的站牌</h2>\n      <div class=\"distance\">\n        <div class=\"distance-title\">\n          <div class=\"distance-common distance-100 active\" @click=\"getNearbyBusSite(500)\">\n            500 m\n          </div>\n          <div class=\"distance-common distance-300\" @click=\"getNearbyBusSite(1000)\">1000 m</div>\n        </div>\n        <div class=\"distance-content\">\n          <h3 v-if=\"nearbyBusSite.length === 0\">目前所在附近沒有公車站牌 !</h3>\n          <div class=\"distance-txt\" v-for=\"item in nearbyBusSite\" :key=\"item.StationID\">\n            <h3>\n              {{ item.StationName.Zh_tw }}\n              <span v-if=\"item.Bearing === 'E'\">(東行)</span>\n              <span v-if=\"item.Bearing === 'W'\">(西行)</span>\n              <span v-if=\"item.Bearing === 'S'\">(南行)</span>\n              <span v-if=\"item.Bearing === 'N'\">(北行)</span>\n              <span v-if=\"item.Bearing === 'SE'\">(東南行)</span>\n              <span v-if=\"item.Bearing === 'NE'\">(東北行)</span>\n              <span v-if=\"item.Bearing === 'SW'\">(西南行)</span>\n              <span v-if=\"item.Bearing === 'NW'\">(西北行)</span>\n            </h3>\n            <p v-for=\"item2 in item.Stops\" :key=\"item2\">\n              {{ item2.RouteName.Zh_tw }}\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n    <Footer />\n  </div>\n</template>\n\n<script>\nimport Navbar from '../components/Navbar.vue';\nimport Title from '../components/Title.vue';\nimport Footer from '../components/Footer.vue';\nimport getAuthorizationHeader from '../tools/AuthorizationHeader';\n\nexport default {\n  name: 'Nearby',\n  components: {\n    Navbar,\n    Title,\n    Footer,\n  },\n  data() {\n    return {\n      userLocation: {\n        longitude: 0,\n        latitude: 0,\n      },\n      nearbyBusSite: [],\n      isLoading: false,\n    };\n  },\n  methods: {\n    getData(url, dataName) {\n      this.isLoading = true;\n      this.axios\n        .get(url, {\n          headers: getAuthorizationHeader(),\n        })\n        .then((response) => {\n          this[dataName] = response.data;\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n      setTimeout(() => {\n        this.isLoading = false;\n      }, 1000);\n    },\n    getUserLocation() {\n      if (navigator.geolocation) {\n        navigator.geolocation.getCurrentPosition(\n          (position) => {\n            this.userLocation.longitude = position.coords.longitude;\n            this.userLocation.latitude = position.coords.latitude;\n            this.getNearbyBusSite(500);\n          },\n          (e) => {\n            const msg = e.message;\n            console.error(msg);\n          },\n        );\n      }\n    },\n    getNearbyBusSite(m) {\n      this.getData(\n        `https://ptx.transportdata.tw/MOTC/v2/Bus/Station/NearBy?$spatialFilter=nearby(${this.userLocation.latitude}%2C%20${this.userLocation.longitude}%2C%20${m})&$format=JSON`,\n        'nearbyBusSite',\n      );\n    },\n  },\n  mounted() {\n    this.getUserLocation();\n\n    const distance100 = document.querySelector('.distance-100');\n    const distance300 = document.querySelector('.distance-300');\n    distance100.addEventListener('click', () => {\n      distance100.classList.add('active');\n      distance300.classList.remove('active');\n    });\n    distance300.addEventListener('click', () => {\n      distance100.classList.remove('active');\n      distance300.classList.add('active');\n    });\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.nearby {\n  width: calc(100% - 142px);\n  padding: 55px 80px 0 80px;\n  .nearby-content {\n    background: #ffffff;\n    box-shadow: 2px 4px 7px rgba(196, 196, 196, 0.11);\n    border-radius: 16px;\n    margin-top: 40px;\n    h2 {\n      font-weight: bold;\n      font-size: 20px;\n      color: #7d7d7d;\n      padding-top: 50px;\n      padding-left: 70px;\n    }\n    .distance {\n      padding-left: 70px;\n      padding-right: 70px;\n      padding-bottom: 50px;\n      margin-top: 35px;\n      .distance-title {\n        display: flex;\n        .distance-common {\n          text-align: center;\n          color: #ffffff;\n          font-weight: bold;\n          font-size: 18px;\n          width: 50%;\n          background: #bfcdff;\n          padding: 12px 0;\n          cursor: pointer;\n          transition: all 0.5s;\n          &:hover {\n            background: #486ae8;\n          }\n        }\n        .distance-100 {\n          border-radius: 16px 0px 0px 0px;\n          &.active {\n            background: #486ae8;\n          }\n        }\n        .distance-300 {\n          border-radius: 0px 16px 0px 0px;\n          &.active {\n            background: #486ae8;\n          }\n        }\n      }\n      .distance-content {\n        height: calc(100vh - 400px);\n        overflow-y: scroll;\n        border: 1px solid #f3f3f3;\n        > h3 {\n          font-weight: bold;\n          font-size: 18px;\n          color: #486ae8;\n          padding: 25px 0;\n          padding-left: 70px;\n        }\n        .distance-txt {\n          padding: 25px 0;\n          padding-left: 70px;\n          background: #f6f7ff;\n          margin-top: 3px;\n          &:first-child{\n            margin-top: 0;\n          }\n          &:nth-child(2n) {\n            background: #eceeff;\n          }\n          h3 {\n            display: flex;\n            font-weight: bold;\n            font-size: 18px;\n            color: #486ae8;\n          }\n          p {\n            font-weight: 500;\n            font-size: 18px;\n            color: #7d7d7d;\n            margin-top: 10px;\n          }\n        }\n      }\n    }\n  }\n}\n</style>\n","import { render } from \"./Nearby.vue?vue&type=template&id=173575f8&scoped=true\"\nimport script from \"./Nearby.vue?vue&type=script&lang=js\"\nexport * from \"./Nearby.vue?vue&type=script&lang=js\"\n\nimport \"./Nearby.vue?vue&type=style&index=0&id=173575f8&lang=scss&scoped=true\"\n\nimport exportComponent from \"Z:\\\\前端\\\\THE F2E\\\\Go_Go_Bus\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-173575f8\"]])\n\nexport default __exports__","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Nearby.vue?vue&type=style&index=0&id=173575f8&lang=scss&scoped=true\""],"sourceRoot":""}